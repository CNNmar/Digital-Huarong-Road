<!DOCTYPE html>
<html>
<head>
  <style>
    body{background:url(123.jpg) top left;
    background-size:100%;}
    h1 {color:red}
    h1 {font-size: 30pt;}
    p {color:rgb(94, 94, 104)}
    p {font-size: 20pt;}
   
.btn {
 width:100px;
 text-align:center;
 line-height:100%;
 padding: 20px 100px;
 font-size:20px ;
 font-style:normal;
 text-decoration:none;
 margin:5px;
 vertical-align:text-bottom;
 zoom:1;
 outline:none;
 font-size-adjust:none;
 font-stretch:normal;
 border-radius:50px;
 box-shadow:0px 1px 2px rgba(0,0,0,0.2);
 text-shadow:0px 1px 1px rgba(0,0,0,0.3);
 color:#fefee9;
 border:1px solid #656566;
 background-repeat:repeat;
 background-size:auto;
 background-origin:padding-box;
 background-clip:padding-box;
 background-color:#8d9094;
 
}
.rbtn {
 width:100px;
 text-align:center;
 line-height:100%;
 padding: 20px 100px;
 font-size:20px ;
 font-style:normal;
 text-decoration:none;
 margin:3px;
 vertical-align:text-bottom;
 zoom:1;
 outline:none;
 font-size-adjust:none;
 font-stretch:normal;
 border-radius:50px;
 box-shadow:0px 1px 2px rgba(0,0,0,0.2);
 text-shadow:0px 1px 1px rgba(0,0,0,0.3);
 color:#fefee9;
 border:1px solid #e45016;
 background-repeat:repeat;
 background-size:auto;
 background-origin:padding-box;
 background-clip:padding-box;
 background-color:#eb260c;
 
}

.btn:hover {
background: #268DFF;
}
.center {
 margin: auto;
 width: 50%;  
}

</style>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

<title>华容道</title>
</head>
<body>
  <div class="center">
  <p>Pressed <span id="counter">0</span> times.</p>
  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
  <canvas id="myCanvas" width="300" height="300" style="border:1px solid #000000;">
    </canvas>
    <p>
      Your Goal:
    </p>
    <p> 
      <img src="1.JPG" width="20" height="20" />  
      <img src="2.JPG" width="20" height="20" />
      <img src="3.JPG" width="20" height="20" /> 
      <br />
      <img src="4.JPG" width="20" height="20" />  
      <img src="5.JPG" width="20" height="20" />
      <img src="6.JPG" width="20" height="20" /> 
      <br />
      <img src="7.JPG" width="20" height="20" />  
      <img src="8.JPG" width="20" height="20" />        
       </p>


    <script>

    cards=new Array();
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");


  function arrProduce() { 
      vector=new Array();
      for(i=1;i<10;i++){
        vector[i]=i;
      }
      s=0;
      t=0;
    for(j=0;j<100;j++){
        a=Math.floor(1+9*Math.random());
        b=Math.floor(1+9*Math.random());
      if(a<=9 && b<=9){
        container=vector[a];
        vector[a]=vector[b];
        vector[b]=container;
    /*vector[a]+=vector[b];
    vector[b]=vector[a]-vector[b];
    vector[a]-=vector[b];*/
      }
    }
    return vector;
  }
  
  
  let arr = arrProduce();
  var solflag = true;
  var reverse = 0;
  function judgesol(){
      for(var i=1;i<8;i++){
        for (var j=i+1;j<9;j++){
          if (arr[i]>arr[j]){
            reverse++;}
          }
        }
      if (reverse==1||reverse==3||reverse==5||reverse==7){
        solflag = false;}
    }
  judgesol();
  while (!solflag){
    arr = arrProduce();
    judgesol();
  }
  uno={};
  uno.x=0;
  uno.y=0;
  dos={};
  dos.x=100;
  dos.y=0;
  tres={};
  tres.x=200;
  tres.y=0;
  cuatro={};
  cuatro.x=0;
  cuatro.y=100;
  cinco={};
  cinco.x=100;
  cinco.y=100;
  seis={};
  seis.x=200;
  seis.y=100;
  siete={};
  siete.x=0;
  siete.y=200;
  ocho={};
  ocho.x=100;
  ocho.y=200;
  nueve={};
  nueve.x=200;
  nueve.y=200;


  var card1=new Image();
    card1.src="1.JPG";
    one={};
    one.img=card1;
    one.x=0;
    one.y=0;
    cards[1]=one;
 
    var card2=new Image();
    card2.src="2.JPG";
    two={};
    two.img=card2;
    two.x=100;
    two.y=0;
    cards[2]=two;

    var card3=new Image();
    card3.src="3.JPG";
    three={};
    three.img=card3;
    three.x=200;
    three.y=0;
    cards[3]=three;

    var card4=new Image();
    card4.src="4.JPG";
    four={};
    four.img=card4;
    four.x=0;
    four.y=100;
    cards[4]=four;

    var card5=new Image();
    card5.src="5.JPG";
    five={};
    five.img=card5;
    five.x=100;
    five.y=100;
    cards[5]=five;

    var card6=new Image();
    card6.src="6.JPG";
    six={};
    six.img=card6;
    six.x=200;
    six.y=100;
    cards[6]=six;

    var card7=new Image();
    card7.src="7.JPG";
    seven={};
    seven.img=card7;
    seven.x=0;
    seven.y=200;
    cards[7]=seven;

    var card8=new Image();
    card8.src="8.JPG";
    eight={};
    eight.img=card8;
    eight.x=100;
    eight.y=200;
    cards[8]=eight;

    blanca={};
    blanca.x=200;
    blanca.y=200;
    cards[9]=blanca;

    
  

  //rearrange the indexs. 
    cards[arr[1]].x=uno.x;
    cards[arr[1]].y=uno.y;
    cards[arr[2]].x=dos.x;
    cards[arr[2]].y=dos.y;
    cards[arr[3]].x=tres.x;
    cards[arr[3]].y=tres.y;
    cards[arr[4]].x=cuatro.x;
    cards[arr[4]].y=cuatro.y;
    cards[arr[5]].x=cinco.x;
    cards[arr[5]].y=cinco.y;
    cards[arr[6]].x=seis.x;
    cards[arr[6]].y=seis.y;
    cards[arr[7]].x=siete.x;
    cards[arr[7]].y=siete.y;
    cards[arr[8]].x=ocho.x;
    cards[arr[8]].y=ocho.y;
    cards[arr[9]].x=nueve.x;
    cards[arr[9]].y=nueve.y;
      

    speed=10;
    posonex=100;
    posoney=100;
    ctx.drawImage(cards[1].img,cards[1].x,cards[1].y,100,100);
    ctx.drawImage(cards[2].img,cards[2].x,cards[2].y,100,100);
    ctx.drawImage(cards[3].img,cards[3].x,cards[3].y,100,100);
    ctx.drawImage(cards[4].img,cards[4].x,cards[4].y,100,100);
    ctx.drawImage(cards[5].img,cards[5].x,cards[5].y,100,100);
    ctx.drawImage(cards[6].img,cards[6].x,cards[6].y,100,100);
    ctx.drawImage(cards[7].img,cards[7].x,cards[7].y,100,100);
    ctx.drawImage(cards[8].img,cards[8].x,cards[8].y,100,100);

    var successflag = false;
    var counter = 0;  // Variable to hold the count
    var count = document.getElementById('counter');

    function search(ix,iy){
      for(i=1;i<9;i++){
        if(cards[i].x==ix && cards[i].y==iy){
          return i;
        }
      }
    }
    function up(){
      aimx=blanca.x;
      aimy=blanca.y+100;
      if(aimy>=100 && aimy<=200){
          ctx.clearRect(aimx,aimy,100,100);
          ctx.drawImage(cards[search(aimx,aimy)].img,aimx,aimy-100,100,100);
          cards[search(aimx,aimy)].y=aimy-100;
          blanca.y+=100;
          counter++; 
        count.textContent = counter;
        judgesuccess();
        if(successflag){   
          alert(`Congratulations！ Totally${document.getElementById('counter').innerHTML}steps.`);

          }
        }
        //要改变图片的坐标！！！
      }
      function down(){
      aimx=blanca.x;
      aimy=blanca.y-100;
      if(aimy>=0 && aimy<=100){
          ctx.clearRect(aimx,aimy,100,100);
          ctx.drawImage(cards[search(aimx,aimy)].img,aimx,aimy+100,100,100);
          cards[search(aimx,aimy)].y=aimy+100;
          blanca.y-=100;
        }
        counter++; 
        count.textContent = counter;
        judgesuccess();
        if(successflag){   
          alert(`Congratulations！ Totally${document.getElementById('counter').innerHTML}steps.`);

          }
        //要改变图片的坐标！！！
      }
    

      function left(){
      aimx=blanca.x+100;
      aimy=blanca.y;
      if(aimx>=100 && aimx<=200){
          ctx.clearRect(aimx,aimy,100,100);
          ctx.drawImage(cards[search(aimx,aimy)].img,aimx-100,aimy,100,100);
          cards[search(aimx,aimy)].x=aimx-100;
          blanca.x+=100;
        }
        counter++; 
        count.textContent = counter;
        judgesuccess();
        if(successflag){   
          alert(`Congratulations！ Totally${document.getElementById('counter').innerHTML}steps.`);

          }
        //要改变图片的坐标！！！
      }

      function right(){
      aimx=blanca.x-100;
      aimy=blanca.y;
      if(aimx>=0 && aimx<=100){
          ctx.clearRect(aimx,aimy,100,100);
          ctx.drawImage(cards[search(aimx,aimy)].img,aimx+100,aimy,100,100);
          cards[search(aimx,aimy)].x=aimx+100;
          blanca.x-=100;
        }
        counter++; 
        count.textContent = counter;
        judgesuccess();
        if(successflag){   
          alert(`Congratulations！ Totally${document.getElementById('counter').innerHTML}steps.`);

          }
        //要改变图片的坐标！！！
      }

      function judgesuccess(){
        if(cards[1].x==0 && cards[1].y==0 &&
           cards[2].x==100 && cards[2].y==0 &&
           cards[3].x==200 && cards[3].y==0 &&
           cards[4].x==0 && cards[4].y==100 &&
           cards[5].x==100 && cards[5].y==100 &&
           cards[6].x==200 && cards[6].y==100 &&
           cards[7].x==0 && cards[7].y==200 &&
           cards[8].x==100 && cards[8].y==200 ){
            successflag = true;
        }
        else {successflag = false;} 
        return successflag;

      }

     /* while(aimy>posoney-100){
        ctx.clearRect(aimx,aimy,aimx+100,aimy+100);
        aimx=speed+aimx;
        ctx.drawImage(card1,aimx,aimy,100,100);
      }
      */
    
</script>
  <br />
  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
  &nbsp&nbsp
    <button class="btn" onclick="up()">Up!</button> <br />
    <button class="btn" onclick="left()">Left!</button> 
    <button class="btn" onclick="down()">Down!</button> 
    
    <button class="btn" onclick="right()">Right!</button> 
    &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
    &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
    &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
    &nbsp&nbsp&nbsp&nbsp&nbsp
    <audio src="123.mp3" controls>

      <p>If you are reading this, it is because your browser does not support the audio element.</p>
      </audio>

</div>
</body>
</html>
